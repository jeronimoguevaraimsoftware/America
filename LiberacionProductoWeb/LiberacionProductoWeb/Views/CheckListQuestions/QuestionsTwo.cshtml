@using Microsoft.Extensions.Localization;
@using LiberacionProductoWeb.Localize;
@using Microsoft.AspNetCore.Identity;
@using LiberacionProductoWeb.Helpers;
@using System.Globalization;
@model LiberacionProductoWeb.Models.CheckListViewModels.CheckListVM
@inject IStringLocalizer<Resource> resource;
@inject UserManager<LiberacionProductoWeb.Models.IndentityModels.ApplicationUser> UserManager
@{
    ViewData["Title"] = "CheckList";
    var checkLisPipas = resource.GetString("CheckLisPipas");
    var select = resource.GetString("Select");
    var claimsIdentity = User.Identity as System.Security.Claims.ClaimsIdentity;
    var userFirstName = "";
    var name = claimsIdentity.Name;
    var rolesUsr = "";
    if (name != null)
    {
        var FullName = UserManager.FindByNameAsync(name);
        userFirstName = FullName.Result.NombreUsuario;
        rolesUsr = FullName.Result.Rol;

    }
    var btnFind = resource.GetString("BtnFind");
    var btnFilter = resource.GetString("BtnFilter");
    var notInformation = resource.GetString("NoInformation");
    var lengthMenu = resource.GetString("LengthMenu");
    var searchPlaceholder = resource.GetString("SearchPlaceholder");
    var info = resource.GetString("Info");
    var emptyTable = resource.GetString("EmptyTable");
    var paginatefirst = resource.GetString("Paginatefirst");
    var paginatelast = resource.GetString("Paginatelast");
    var pageNext = resource.GetString("PageNext");
    var pagePreviuos = resource.GetString("PagePreviuos");
    var loadingRecords = resource.GetString("LoadingRecords");
    var processing = resource.GetString("Processing");
    var zeroRecords = resource.GetString("ZeroRecords");
    var infoEmpty = resource.GetString("InfoEmpty");
    var infoFiltered = resource.GetString("InfoFiltered");
    var strDate = Model.LastDateRecord.ToString("yyyy-MM-dd HH:mm");
    var validateHtml = resource.GetString("validateHtml");
    var idOA = Context.Request.Query["idOA"];
    var tournumber = Context.Request.Query["tournumber"];
    var distributionBatch = Context.Request.Query["distributionBatch"];
    var checkListId = Context.Request.Query["checkListId"];
    var IsHttps = Context.Request.IsHttps;
    var url = Context.Request.Host.Value;

}

@await Html.PartialAsync("~/Views/Shared/_Navigation.cshtml")

<div id="content" class="content">

    <div class="section-container PantallaPrincipalContenedor section-with-top-border p-b-10">

        <form method="post" asp-action="Save" id="CheckListForm" enctype="multipart/form-data">
            <!-- begin #content -->
            <div id="content">
                @*<select required id="doc_type" class="selectpicker show-menu-arrow combobox"  oninvalid="this.setCustomValidity('captura este campo')" oninput="setCustomValidity('')"></select>*@
                <div class="form-group-sm">
                    <h1 class="page-header">@checkLisPipas</h1>
                    <div class="break"></div>
                    @Html.ValidationMessage("Ok", new { @class = "text-success" })
                    @if (User.HasClaim(SecurityConstants.PERMISSION, SecurityConstants.EDITAR_VERIFICACION_DE_PIPAS))
                    {
                        <button class='btn btn' name="Editar" id="Editar" type="button" style="background-color:transparent">
                            <i class="fa fa-edit"></i> Editar
                        </button>
                    }
                    <button name="Guardar" class='btn btn' id="Guardar" type="button" onclick="Save(this); return false;" style="background-color:transparent">
                        <i class="fa fa-save"></i> Guardar
                    </button>
                    @if (User.HasClaim(SecurityConstants.PERMISSION, SecurityConstants.CANCELAR_CHECK_LIST_DE_VERIFICACION_DE_PIPAS))
                    {
                        <button class="btn btn" data-toggle="modal" id="BtnCancel" data-target="#ModalCancel" type="button" style="background-color:transparent">
                            <i class="fa fa-minus-circle"></i> Cancelar
                        </button>
                    }
                    @if (User.HasClaim(SecurityConstants.PERMISSION, SecurityConstants.CANCELAR_CHECK_LIST_DE_VERIFICACION_DE_PIPAS))
                    {
                        <button data-toggle="modal" data-target="#ModalCancelApprove" id="BtnCancelApprove" class='btn btn' type="button" style="background-color:transparent">
                            <i class="fa fa-ban"></i> Aprobar cancelación
                        </button>
                    }
                    @if (User.HasClaim(SecurityConstants.PERMISSION, SecurityConstants.EXPORTAR_CHECK_LIST_VERIFICACION_DE_PIPAS))
                    {
                        <a href="/ConditioningOrder/ExportChecklistPdf?Id=@Model.NumberOrder&checkListId=@checkListId&distributionBatch=@distributionBatch&option=2" class="btn btn-white m-r-5" type="button"
                           style="background-color: transparent;">
                            <i class="fa fa-file-pdf"></i>Exportar
                            a PDF
                        </a>
                    }
                    <div class="break"></div>
                    <div class="pull-right">
                        <label>Fecha y hora de creación:</label>
                        <label>@strDate</label>
                        <label>Estado:</label>
                        <label>@Model.LastStatusRecord</label>
                        <input type="text" name="TxtStatus" id="TxtStatus" value="@Model.LastStatusRecord" readonly hidden />
                    </div>
                    <br />
                    <br />
                    <div class="break"></div>

                    <div class="form-inline col-md-14">
                        <!-- end page-header -->
                        <label>Localidad</label>
                        <input type="text" class="form-control col-1.3" asp-for="Localizate" readonly="readonly" />
                        <label>Pipa No.</label>
                        <input type="text" class="form-control col-1" asp-for="Pipe" readonly="readonly" oninput="addValidation(this)" />
                        <label>Producto</label>
                        <input type="text" class="form-control col-1.2" asp-for="Product" readonly="readonly" />
                        <label hidden="hidden">Numero de orden de acondicionamiento</label>
                        <input type="text" class="form-control col-1" asp-for="NumberOrder" hidden="hidden" readonly="readonly" />


                    </div>
                    <div class="form-inline col-md-14">
                        <label>Lote de distribuicion</label>
                        <input type="text" class="form-control col-3" asp-for="DistributionBatch" readonly="readonly" />
                        <label>Tour number</label>
                        <input type="text" class="form-control col-3" asp-for="TourNumber" readonly="readonly" />
                        <input type="number" class="form-control col-3" asp-for="checkListId" value="@Model.checkListId" readonly="readonly" hidden="hidden" />
                    </div>


                    <div name="contenedorChecks">
                        <div class="break"></div>
                        <h5 class="page-item">Inspección visual de pipas al recibo</h5>
                        <label class="text-justify">IMPORTANTE: La calificación de cualquier elemento en esta sección como "NO CUMPLE", implica que la pipa NO reúne las condiciones necesarias para ser llenado o liberada, por lo cuál deberán definirse las acciones a seguir y, documentarse en este registro para su seguimiento.</label>
                        <div class="break"></div>

                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@

                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tbl-check" class="table table-striped table-bordered" style="width:140%;">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Requisito a evaluar \ criterios</th>
                                                    <th scope="col">Verificación del requerimiento</th>
                                                    <th scope="col">Descripción del incuplimiento</th>
                                                    <th scope="col">Notificar a</th>
                                                    <th scope="col">Acción</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{int count = 0;
                                                    @foreach (var entry in Model.checkListsCatalog.Where(x => x.Group == "IV"))
                                                    {
                                                        count = count + 1;
                                                        <tr>
                                                            <td class="text-justify">
                                                                @Html.Raw(entry.Requirement)
                                                            </td>

                                                            @if (count == 1)
                                                            {
                                                                <td class="col-6">
                                                                    @if (@entry.Verification == "OK")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check1" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check1" />
                                                                    }
                                                                    <label>Cumple</label>
                                                                    @if (@entry.Verification == "NO")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check2" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check2" />
                                                                    }
                                                                    <label>No Cumple</label>
                                                                    <label>NA</label>
                                                                    @if (@entry.Verification == "NA")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check3" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check3" />
                                                                    }

                                                                </td>
                                                                <td>
                                                                    <input asp-for="Description1" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Check2', 'Check3')" />

                                                                </td>
                                                                <td>
                                                                    <div name="TdDiv1" id="TdDiv1" hidden="hidden">
                                                                        <select multiple asp-for="SelectedNotifyUsr1Filter" asp-items="Model.ListUserNotify" class="selectpicker" data-live-search="true" title="@select">
                                                                        </select>
                                                                    </div>
                                                                    <span id="spanNotify@(count)">@entry.Notify</span>
                                                                </td>
                                                                <td>
                                                                    <input asp-for="Action1" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Check2', 'Check3')" />
                                                                </td>
                                                            }
                                                            @if (count == 2)
                                                            {
                                                                <td>
                                                                    @if (@entry.Verification == "OK")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check4" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check4" />
                                                                    }
                                                                    <label>Cumple</label>
                                                                    @if (@entry.Verification == "NO")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check5" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check5" />
                                                                    }
                                                                    <label>No Cumple</label>
                                                                    <label>NA</label>
                                                                    @if (@entry.Verification == "NA")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check6" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check6" />
                                                                    }

                                                                </td>
                                                                <td>
                                                                    <input asp-for="Description2" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Check5', 'Check6')" />
                                                                </td>
                                                                <td>
                                                                    <div name="TdDiv2" id="TdDiv2" hidden="hidden">
                                                                        <select multiple asp-for="SelectedNotifyUsr2Filter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                        </select>
                                                                    </div>
                                                                    <span id="spanNotify@(count)">@entry.Notify</span>
                                                                </td>
                                                                <td>
                                                                    <input asp-for="Action2" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Check5', 'Check6')" />
                                                                </td>
                                                            }

                                                            @if (count == 3)
                                                            {
                                                                <td>
                                                                    @if (@entry.Verification == "OK")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check7" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check7" />
                                                                    }
                                                                    <label>Cumple</label>
                                                                    @if (@entry.Verification == "NO")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check8" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check8" />
                                                                    }
                                                                    <label>No Cumple</label>
                                                                    <label>NA</label>
                                                                    @if (@entry.Verification == "NA")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check9" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check9" />
                                                                    }


                                                                </td>
                                                                <td>
                                                                    <input asp-for="Description3" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Check8', 'Check9')" />
                                                                </td>
                                                                <td>
                                                                    <div name="TdDiv3" id="TdDiv3" hidden="hidden">
                                                                        <select multiple asp-for="SelectedNotifyUsr3Filter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                        </select>
                                                                    </div>
                                                                    <span id="spanNotify@(count)">@entry.Notify</span>
                                                                </td>
                                                                <td>
                                                                    <input asp-for="Action3" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Check8', 'Check9')" />
                                                                </td>
                                                            }

                                                            @if (count == 4)
                                                            {
                                                                <td>
                                                                    @if (@entry.Verification == "OK")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check10" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check10" />
                                                                    }
                                                                    <label>Cumple</label>
                                                                    @if (@entry.Verification == "NO")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check11" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check11" />
                                                                    }
                                                                    <label>No Cumple</label>
                                                                    <label>NA</label>
                                                                    @if (@entry.Verification == "NA")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check12" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check12" />
                                                                    }


                                                                </td>
                                                                <td>
                                                                    <input asp-for="Description4" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Check11', 'Check12')" />
                                                                </td>
                                                                <td>
                                                                    <div name="TdDiv4" id="TdDiv4" hidden="hidden">
                                                                        <select multiple asp-for="SelectedNotifyUsr4Filter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                        </select>
                                                                    </div>
                                                                    <span id="spanNotify@(count)">@entry.Notify</span>
                                                                </td>
                                                                <td>
                                                                    <input asp-for="Action4" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Check11', 'Check12')" />
                                                                </td>
                                                            }

                                                            @if (count == 5)
                                                            {
                                                                <td>
                                                                    @if (@entry.Verification == "OK")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check13" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check13" />
                                                                    }
                                                                    <label>Cumple</label>
                                                                    @if (@entry.Verification == "NO")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check14" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check14" />
                                                                    }
                                                                    <label>No Cumple</label>
                                                                    <label>NA</label>
                                                                    @if (@entry.Verification == "NA")
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check15" checked />
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" disabled="disabled" asp-for="Check15" />
                                                                    }


                                                                </td>
                                                                <td>
                                                                    <input asp-for="Description5" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Check14', 'Check15')" />
                                                                </td>
                                                                <td>
                                                                    <div name="TdDiv5" id="TdDiv5" hidden="hidden">
                                                                        <select multiple asp-for="SelectedNotifyUsr5Filter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                        </select>
                                                                    </div>
                                                                    <span id="spanNotify@(count)">@entry.Notify</span>
                                                                </td>
                                                                <td>
                                                                    <input asp-for="Action5" class="form-control" readonly="readonly" value="@entry.Action" oninput="addValidationInput(this, 'Check14', 'Check15')" />
                                                                </td>
                                                            }
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>


                            <div class="text-center col-14">
                                <label name="observacionesInspeccionVS">Observaciones</label>
                                <div class="break"></div>
                                <input asp-for="CommentIv" readonly="readonly" placeholder="Escriba sus observaciones" class="form-control text-center" />

                            </div>
                        </div>
                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@
                                    <label name="LblElaborate" class="text-black-50">Elaborado por</label>
                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tbl-dictiumStepOne" class="table table-striped table-bordered" style="@Model.Style">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Dictamen final cumple</th>
                                                    <th scope="col">Elaborado por</th>
                                                    <th scope="col">Observaciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.checkListPipeDictiumAnswers != null)
                                                {
                                                    @foreach (var entry in Model.checkListPipeDictiumAnswers)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <label>Sí</label>
                                                                @if (@entry.Verification == "OK")
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium1" id="CheckDictium1VerificationOne" checked disabled="disabled" />
                                                                }
                                                                else
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium1" id="CheckDictium1VerificationOne" disabled="disabled" />
                                                                }
                                                                <label>No</label>
                                                                @if (@entry.Verification == "NO")
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium2" id="CheckDictium2VerificationOne" checked disabled="disabled" />
                                                                }
                                                                else
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium2" id="CheckDictium2VerificationOne" disabled="disabled" />
                                                                }
                                                            </td>
                                                            <td class="text-center">
                                                                @entry.CreatedBy
                                                                <br />
                                                                @entry.Date.ToString("yyyy-MM-dd HH:mm")
                                                            </td>
                                                            <td class="text-justify">
                                                                <textarea asp-for="@entry.Comment" disabled="disabled" placeholder="Escriba sus observaciones" class="form-control text-jus"></textarea>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="break"></div>
                        <h5 class="page-item">LLenado y verificación de pipas</h5>
                        <label class="text-justify">IMPORTANTE: Esta sección contituye una verificación para asegurar que quien realiza el llenado de la pipa ha considerado las actividades definidas en el manual de BPM y prerrequisitos, así como en los procedimientos aplicables cualquier cosa o desviación se notificará inmediatamente al personal en turno responsable  de la localidad, para la toma  de acciones , las cuales deberán documentarse en este registro para su control.</label>
                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@

                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tbl-check" class="table table-striped table-bordered" style="width:130%;">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Requerimiento</th>
                                                    <th scope="col">Verificación del requerimiento</th>
                                                    <th scope="col">Descripción del incuplimiento</th>
                                                    <th scope="col">Notificar a</th>
                                                    <th scope="col">Acción</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{int countf = 0;
                                                    if (Model.checkListsfpCatalog != null)
                                                    {
                                                        @foreach (var entry in Model.checkListsfpCatalog.Where(x => x.Group == "FP"))
                                                        {
                                                            countf = countf + 1;
                                                            <tr>
                                                                <td class="text-justify">
                                                                    @Html.Raw(entry.Requirement)
                                                                </td>

                                                                @if (countf == 1)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp1" checked class="requirement-one" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp1" class="requirement-one" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp2" checked class="requirement-one check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp2" class="requirement-one check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp3" checked class="requirement-one check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp3" class="requirement-one check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp1-error" class="error" for="Checkfp1"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp1" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp2', 'Checkfp3')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp1-error" class="error" for="Descriptionfp1"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp1" id="TdDivfp1" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr1fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr1fpFilter-error" class="error" for="SelectedNotifyUsr1fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp1" class="form-control" readonly="readonly" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp2', 'Checkfp3')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp1-error" class="error" for="Actionfp1"></label>
                                                                        </div>
                                                                    </td>
                                                                }
                                                                @if (countf == 2)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp4" checked class="requirement-two" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp4" class="requirement-two" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp5" checked class="requirement-two check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp5" class="requirement-two check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp6" checked class="requirement-two check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp6" class="requirement-two check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp4-error" class="error" for="Checkfp4"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp2" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp5', 'Checkfp6')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp2-error" class="error" for="Descriptionfp2"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp2" id="TdDivfp2" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr2fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr2fpFilter-error" class="error" for="SelectedNotifyUsr2fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp2" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp5', 'Checkfp6')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp2-error" class="error" for="Actionfp2"></label>
                                                                        </div>
                                                                    </td>
                                                                }

                                                                @if (countf == 3)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp7" checked class="requirement-three" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp7" class="requirement-three" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp8" checked class="requirement-three check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp8" class="requirement-three check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp9" checked class="requirement-three check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp9" class="requirement-three check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp7-error" class="error" for="Checkfp7"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp3" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp8', 'Checkfp9')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp3-error" class="error" for="Descriptionfp3"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp3" id="TdDivfp3" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr3fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr3fpFilter-error" class="error" for="SelectedNotifyUsr3fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp3" class="form-control" readonly="readonly" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp8', 'Checkfp9')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp3-error" class="error" for="Actionfp3"></label>
                                                                        </div>
                                                                    </td>
                                                                }

                                                                @if (countf == 4)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp10" checked class="requirement-four" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp10" class="requirement-four" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp11" checked class="requirement-four check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp11" class="requirement-four check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp12" checked class="requirement-four check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp12" class="requirement-four check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp10-error" class="error" for="Checkfp10"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp4" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp11', 'Checkfp12')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp4-error" class="error" for="Descriptionfp4"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp4" id="TdDivfp4" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr4fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr4fpFilter-error" class="error" for="SelectedNotifyUsr4fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp4" class="form-control" readonly="readonly" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp11', 'Checkfp12')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp4-error" class="error" for="Actionfp4"></label>
                                                                        </div>
                                                                    </td>
                                                                }

                                                                @if (countf == 5)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp13" checked class="requirement-five" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp13" class="requirement-five" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp14" checked class="requirement-five check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp14" class="requirement-five check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp15" checked class="requirement-five check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp15" class="requirement-five check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp13-error" class="error" for="Checkfp13"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp5" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp14', 'Checkfp15')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp5-error" class="error" for="Descriptionfp5"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp5" id="TdDivfp5" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr5fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr5fpFilter-error" class="error" for="SelectedNotifyUsr5fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp5" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp14', 'Checkfp15')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp5-error" class="error" for="Actionfp5"></label>
                                                                        </div>
                                                                    </td>
                                                                }

                                                                @if (countf == 6)
                                                                {
                                                                    <td>
                                                                        @if (@entry.Verification == "OK")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp16" checked class="requirement-six" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp16" class="requirement-six" />
                                                                        }
                                                                        <label>Cumple</label>
                                                                        @if (@entry.Verification == "NO")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp17" checked class="requirement-six check-nocumple" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp17" class="requirement-six check-nocumple" />
                                                                        }
                                                                        <label>No Cumple</label>
                                                                        @if (@entry.Verification == "NA")
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp18" checked class="requirement-six check-na" />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" disabled="disabled" asp-for="Checkfp18" class="requirement-six check-na" />
                                                                        }
                                                                        <label>NA</label>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Checkfp16-error" class="error" for="Checkfp16"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Descriptionfp6" readonly="readonly" class="form-control" value="@entry.Description" oninput="addValidationInput(this, 'Checkfp17', 'Checkfp18')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Descriptionfp6-error" class="error" for="Descriptionfp6"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <div name="TdDivfp6" id="TdDivfp6" hidden="hidden">
                                                                            <select multiple asp-for="SelectedNotifyUsr6fpFilter" asp-items="Model.ListUserNotify" class="selectpicker show-menu-arrow combobox" data-style="btn-inverse" data-live-search="true" title="@select">
                                                                            </select>
                                                                        </div>
                                                                        <span id="spanNotifyf@(countf)">@entry.Notify</span>
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="SelectedNotifyUsr6fpFilter-error" class="error" for="SelectedNotifyUsr6fpFilter"></label>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input asp-for="Actionfp6" readonly="readonly" class="form-control" value="@entry.Action" oninput="addValidationInput(this, 'Checkfp17', 'Checkfp18')" />
                                                                        <div class="row" style="justify-content: center;">
                                                                            <label id="Actionfp6-error" class="error" for="Actionfp6"></label>
                                                                        </div>
                                                                    </td>
                                                                }
                                                            </tr>
                                                        }
                                                    }
                                                }

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <label name="observacionesInspeccionVP">Observaciones</label>
                                <div class="break"></div>
                                <input asp-for="CommentFP" readonly="readonly" placeholder="Escriba sus observaciones" class="form-control text-center" />
                            </div>
                        </div>



                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@
                                    <label name="LblElaborate" class="text-black-50">Elaborado por</label>
                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tbl-dictium" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Dictamen final cumple</th>
                                                    <th scope="col">Elaborado por</th>
                                                    <th scope="col">Observaciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.checkListPipeDictiumAnswers != null)
                                                {
                                                    @foreach (var entry in Model.checkListPipeDictiumAnswers)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <label>Sí</label>
                                                                @if (@entry.VerificationTwo == "OK")
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium1" checked disabled="disabled" />
                                                                }
                                                                else
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium1" disabled="disabled" />
                                                                }
                                                                <label>No</label>
                                                                @if (@entry.VerificationTwo == "NO")
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium2" checked disabled="disabled" />
                                                                }
                                                                else
                                                                {
                                                                    <input type="checkbox" asp-for="CheckDictium2" disabled="disabled" />
                                                                }
                                                            </td>
                                                            <td class="text-center">
                                                                <button type="button" class="btn btn-success" id="BtnPipeFillingCustomerReviewedSignature" hidden="hidden" onclick="signPipeFillingCustomerRecord()">Firma de Usuario de Produccion</button>
                                                                <input asp-for="DictumUser" hidden="hidden" />
                                                                <input asp-for="DictiumDate" hidden="hidden" />
                                                                <div id="PipeFillingCustomerReviewedSignature"></div>
                                                            </td>
                                                            <td class="text-justify">
                                                                <textarea asp-for="DictumComment" disabled="disabled" placeholder="Escriba sus observaciones" class="form-control text-jus"></textarea>
                                                                <div class="row" style="justify-content: center;">
                                                                    <label id="DictumComment-error" class="error" for="DictumComment"></label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@
                                    <label name="LblHistObs" class="text-black-50">Historial de observaciones</label>
                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tblHistorial" class="table table-striped table-bordered" style="width:130%;">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Sección</th>
                                                    <th scope="col">Autor</th>
                                                    <th scope="col">Fecha y hora</th>
                                                    <th scope="col">Observaciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.checkListPipeCommentsAnswers != null)
                                                {
                                                    @foreach (var entry in Model.checkListPipeCommentsAnswers)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <label class="text-black-50">@entry.Group</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <label name="LblHistObsAutor">@entry.Author</label>
                                                            </td>
                                                            <td class="text-center">

                                                                <label name="LblHistObsDate">@entry.Date.ToString("yyyy-MM-dd HH:mm")</label>
                                                            </td>
                                                            <td class="text-justify">
                                                                <label name="LblHistObsv">@entry.Comment</label>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="panel panel-primary ">
                            <div class="panel-heading">
                                <div class="btn-group pull-left">
                                    @*<a href="javascript:;" class="btn btn-white m-r-5" id="ExporttoExcel"><i class="fa fa-file-excel"></i> Exportar a Excel</a>*@
                                    <label name="LblHistObs" class="text-black-50">Historial de estados</label>
                                </div>
                                <div class="btn-group pull-right">

                                </div>
                                <h4 class="panel-title">
                                    &nbsp;
                                </h4>
                            </div>
                            <div class="panel-body ">
                                <div class="table-responsive">
                                    <div class="table-responsive">
                                        <table id="tblStates" class="table table-striped table-bordered dataTable display" style="width:130%;">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Estado</th>
                                                    <th scope="col">Fecha y hora</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (Model.checkListsRecord != null)
                                                {
                                                    @foreach (var entry in Model.checkListsRecord)
                                                    {
                                                        <tr>

                                                            <td class="text-justify">
                                                                @entry.Status
                                                            </td>
                                                            <td class="text-justify">
                                                                <label name="LblStateDate">@entry.Date.ToString("yyyy-MM-dd HH:mm")</label>
                                                            </td>
                                                        </tr>

                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="modal fade" id="ModalCancel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">
                                    ¿Deseas solicitar la aprobación de la cancelación del checkList de verificación de pipas?

                                </h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                @if (Model.FlagApproveSC != null)
                                {
                                    <label>Motivo de cancelación</label>
                                    <textarea class="form-control" asp-for="ReasonReject">@Model.ReasonReject</textarea>
                                }
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" onclick="CancelProNo(this); return false;" data-dismiss="modal">No</button>
                                <button type="submit" class="btn btn-success" onclick="CancelPro(this); return false;" data-dismiss="modal" name="Cancel" id="Cancel">Si</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="ModalCancelApprove" tabindex="-1" role="dialog" aria-labelledby="ModalCancelApproveLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="ModalCancelApproveLabel">
                                </h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <h5>¿Deseas aprobar o rechazar la solicitud de cancelación del checkList de verificación de Pipas?</h5>
                                <label>Motivo de cancelación</label>
                                <textarea class="form-control" id="ReasonRejectAnswer">@Model.ReasonReject</textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" onclick="CancelReject(this); return false;" data-dismiss="modal">Rechazar</button>
                                <button type="submit" class="btn btn-success" onclick="CancelApp(); return false;" data-dismiss="modal" name="CancelApprove" id="Cancel">Aceptar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mensaje de error -->
            <div class="col-md-12" id="message"></div>
        </form>
    </div>
</div>
<!-- end #content -->
@section Styles {

    <link href="~/plugins/bootstrap-combobox/css/bootstrap-combobox.css" rel="stylesheet" />
    <link href="~/plugins/bootstrap-select/bootstrap-select.css" rel="stylesheet" />
    <link href="~/plugins/select2/dist/css/select2.min.css" rel="stylesheet" />
    <link href="~/plugins/bootstrap-calendar/css/bootstrap_calendar.css" rel="stylesheet" />


    <link href="~/plugins/DataTables/media/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="~/plugins/DataTables/extensions/Responsive/css/responsive.bootstrap.min.css" rel="stylesheet" />
    <link href="~/plugins/DataTables/extensions/Buttons/css/buttons.bootstrap.min.css" rel="stylesheet" />

    <link href="~/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" />
    <link href="~/plugins/jquery/jquery.dataTables.min.css" rel="stylesheet" />

}
@section Scripts {
    <environment names="Development,Staging,Production">
        <script src="~/plugins/bootstrap-calendar/js/bootstrap_calendar.min.js"></script>

        <script src="~/plugins/gritter/js/jquery.gritter.js"></script>

        <script src="~/plugins/bootstrap-combobox/js/bootstrap-combobox.js"></script>
        <script src="~/plugins/bootstrap-select/bootstrap-select.js"></script>
        <script src="~/plugins/select2/dist/js/select2.min.js"></script>


        <script src="~/plugins/bootstrap-calendar/js/bootstrap_calendar.min.js"></script>


        <script src="~/plugins/DataTables/media/js/jquery.dataTables.js"></script>
        <script src="~/plugins/DataTables/media/js/dataTables.bootstrap.min.js"></script>
        <script src="~/plugins/DataTables/extensions/Responsive/js/dataTables.responsive.min.js"></script>

        <script src="~/plugins/DataTables/extensions/Buttons/js/buttons.html5.min.js"></script>
        <script src="~/plugins/DataTables/extensions/Buttons/js/buttons.print.min.js"></script>
        <script src="~/plugins/DataTables/extensions/Buttons/js/dataTables.buttons.min.js"></script>

        <script src="~/plugins/gritter/js/jquery.gritter.js"></script>

        <script src="~/plugins/bootbox/js/bootbox.all.min.js"></script>
        <script src="~/js/demo.min.js"></script>
        <script src="~/js/apps.min.js"></script>
        <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
        <script src="~/js/catalogs.js"></script>
        <script src="~/js/linde.js"></script>
    </environment>

    <script>
        $(function () {

               if ('@Model.MensajeError'.length > 1) {
                $('#message').append('<div class="alert alert-danger"> <a class="close" data-dismiss="alert" href="#">&times;</a>@Model.MensajeError </div>');
            }
        });
        $(function () {

            if ('@Model.MensajeInfo'.length > 1) {
                $('#message').append('<div class="alert alert-success"> <a class="close" data-dismiss="alert" href="#">&times;</a>@Model.MensajeInfo </div>');
            }
        });

        var CancelPro = function (event) {
            $.ajax({
                type: "POST",
                url: "/CheckListQuestions/Cancel?option=2",
                data: serializeCheckList(1),
                dataType: "json",
                success: function (response) {
                    if (response.result === "Ok") {
                        $.gritter.add({
                            title: "",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                        $('#BtnCancel').hide();
                        $('#BtnCancelApprove').show();
                        $("#ReasonRejectAnswer").val($("#ReasonReject").val());
                    }
                    else {
                        $.gritter.add({
                            title: "Ocurrió un error",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                    }
                }
            });

        }
        var CancelReject = function (event) {
            $.ajax({
                type: "POST",
                url: "/CheckListQuestions/CancelReject?option=2",
                data: serializeCheckList(2),
                dataType: "json",
                success: function (response) {
                 if (response.result === "Ok") {
                     $.gritter.add({
                         title: "",
                         text: response.message,
                         class_name: "gritter-light"
                     })
                     $('#BtnCancel').show();
                     $('#BtnCancelApprove').hide();
                 }
                 else {
                     $.gritter.add({
                         title: "Ocurrió un error",
                         text: response.message,
                         class_name: "gritter-light"
                     })
                 }
             }
            });

        }
        var CancelProNo = function (event) {
            $.ajax({
                type: "POST",
                url: "/CheckListQuestions/CancelNo?option=2",
                data: $("#CheckListForm").serialize(),
                dataType: "json",
                success: function (response) {
                 if (response.result === "Ok") {
                     $.gritter.add({
                         title: "",
                         text: response.message,
                         class_name: "gritter-light"
                     });
                     $("#ReasonRejectAnswer").val($("#ReasonReject").val());
                 }
                 else {
                     $.gritter.add({
                         title: "Ocurrió un error",
                         text: response.message,
                         class_name: "gritter-light"
                     })
                 }
             }
            });

        }
        var Save = function (event) {
            removeValidationsChecks();
            removeValidationComments();
            const valid = $("#CheckListForm").valid();
            if (!valid) {
                $.gritter.add({
                    title: "Error!",
                    text: "Es necesario completar la información antes de continuar.",
                    class_name: "gritter-light"
                });
                return;
            } else if (!validationSign()) {
                $.gritter.add({
                    title: "Error!",
                    text: "Es requerida la firma.",
                    class_name: "gritter-light"
                });
                return;
            }
             $.ajax({
                type: "POST",
                url: "/CheckListQuestions/SaveQuestionsTwo/",
                data: $("#CheckListForm").serialize(),
                dataType: "json",
                success: function (response) {
                    if (response.result === "Ok") {
                        $.gritter.add({
                            title: "",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                        ///redirect
                        window.location.reload();
                    }
                    else {
                        $.gritter.add({
                            title: "Ocurrió un error",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                    }
                }
            });
        }

        $(document).ready(function () {
            App.init();
            Demo.init();
            configValidations();
            $("#Guardar").hide();
            $("#BtnCancelApprove").hide();
            if ($("#CheckDictium1").is(':checked')) {
                $("#Editar").hide();
                $("#BtnCancel").hide();
                $("#BtnCancelApprove").hide();
            }
            if ($("#CheckDictium2").is(':checked')) {
                $("#Editar").hide();
                $("#BtnCancel").hide();
                $("#BtnCancelApprove").hide();
            }

            if ($('#TxtStatus').val() === 'CL-Cancelado' || $('#TxtStatus').val() === 'CL-Liberado' || $('#TxtStatus').val() === 'CL-Cerrado cumple') {
                $("#BtnCancel").hide();
                $("#BtnCancelApprove").hide();
                $("#Editar").hide();
            }
            if ($('#TxtStatus').val() === 'CL-En cancelación') {
                $('#BtnCancelApprove').show();
                $("#BtnCancel").hide();
            }
            if ($('#DictumUser').val() != '') {
                let user = $('#DictumUser').val();
                var reviewedDate = new Date($('#DictiumDate').val());
                $('#PipeFillingCustomerReviewedSignature').html(getSignature(user, reviewedDate))
            }
            $("#CheckDictium1").change(function () {
                if ($(this).is(':checked')) {
                    addValidationsChecks();
                    removeValidationComments();
                    const valid = $("#CheckListForm").valid();
                    if (!valid) {
                        $.gritter.add({
                            title: "Error!",
                            text: "Es necesario completar la información antes de continuar.",
                            class_name: "gritter-light"
                        });
                        $(this).prop("checked", false);
                        return;
                    } else if (isAllCheckedNA()) {
                        $.gritter.add({
                            title: "Error!",
                            text: "Almenos un inciso debe ser diferente de NA.",
                            class_name: "gritter-light"
                        });
                        $(this).prop("checked", false);
                        return;
                    } else if (existCheckedNoCumple()) {
                        $.gritter.add({
                            title: "Error!",
                            text: "No es posible dictaminar, ya que una verficacion se encuentra como no cumple.",
                            class_name: "gritter-light"
                        });
                        $(this).prop("checked", false);
                        return;
                    }
                    $("#BtnPipeFillingCustomerReviewedSignature").removeAttr('hidden');
                    $('#CheckDictium2').prop('checked', false);
                    $("#PipeFillingCustomerReviewedSignature").html('');
                }
            });
            $("#CheckDictium2").change(function () {
                if ($(this).is(':checked')) {
                    addValidationsChecks();
                    addValidationsComments();
                    const valid = $("#CheckListForm").valid();
                    if (!valid) {
                        $.gritter.add({
                            title: "Error!",
                            text: "Es necesario completar la información antes de continuar.",
                            class_name: "gritter-light"
                        });
                        $(this).prop("checked", false);
                        return;
                    } else if (isAllCheckedNA()) {
                        $.gritter.add({
                            title: "Error!",
                            text: "Almenos un inciso debe ser diferente de NA.",
                            class_name: "gritter-light"
                        });
                        $(this).prop("checked", false);
                        return;
                    }
                    $("#BtnPipeFillingCustomerReviewedSignature").removeAttr('hidden');
                    $('#CheckDictium1').prop('checked', false);
                    $("#PipeFillingCustomerReviewedSignature").html('');
                }
            });

            $("#Checkfp1").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp2').prop('checked', false);
                    $('#Checkfp3').prop('checked', false);
                    $('#Descriptionfp1').val('NA');
                    $('#Descriptionfp1').prop("readonly", true);
                    $('#Actionfp1').val('NA');
                    $('#Actionfp1').prop("readonly", true);
                    $("#TdDivfp1").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr1fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr1fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp1').val('');
                    $('#Actionfp1').val('');
                    $("#SelectedNotifyUsr1fpFilter").val([]);
                    $("#SelectedNotifyUsr1fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp2").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp1').prop('checked', false);
                    $('#Checkfp3').prop('checked', false);
                    $('#Descriptionfp1').val('');
                    $('#Descriptionfp1').prop("readonly", false);
                    $('#Actionfp1').val('');
                    $('#Actionfp1').prop("readonly", false);
                    $("#TdDivfp1").removeAttr("style");
                    $("#SelectedNotifyUsr1fpFilter").val([]);
                    $("#SelectedNotifyUsr1fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp3").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp1').prop('checked', false);
                    $('#Checkfp2').prop('checked', false);
                    $('#Descriptionfp1').val('NA');
                    $('#Descriptionfp1').prop("readonly", true);
                    $('#Actionfp1').val('NA');
                    $('#Actionfp1').prop("readonly", true);
                    $("#TdDivfp1").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr1fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr1fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp1').val('');
                    $('#Actionfp1').val('');
                    $("#SelectedNotifyUsr1fpFilter").val([]);
                    $("#SelectedNotifyUsr1fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Checkfp4").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp5').prop('checked', false);
                    $('#Checkfp6').prop('checked', false);
                    $('#Descriptionfp2').val('NA');
                    $('#Descriptionfp2').prop("readonly", true);
                    $('#Actionfp2').val('NA');
                    $('#Actionfp2').prop("readonly", true);
                    $("#TdDivfp2").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr2fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr2fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp2').val('');
                    $('#Actionfp2').val('');
                    $("#SelectedNotifyUsr2fpFilter").val([]);
                    $("#SelectedNotifyUsr2Filter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp5").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp4').prop('checked', false);
                    $('#Checkfp6').prop('checked', false);
                    $('#Descriptionfp2').val('');
                    $('#Descriptionfp2').prop("readonly", false);
                    $('#Actionfp2').val('');
                    $('#Actionfp2').prop("readonly", false);
                    $("#TdDivfp2").removeAttr("style");
                    $("#SelectedNotifyUsr2fpFilter").val([]);
                    $("#SelectedNotifyUsr2fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp6").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp4').prop('checked', false);
                    $('#Checkfp5').prop('checked', false);
                    $('#Descriptionfp2').val('NA');
                    $('#Descriptionfp2').prop("readonly", true);
                    $('#Actionfp2').val('NA');
                    $('#Actionfp2').prop("readonly", true);
                    $("#TdDivfp2").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr2fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr2fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp2').val('');
                    $('#Actionfp2').val('');
                    $("#SelectedNotifyUsr2fpFilter").val([]);
                    $("#SelectedNotifyUsr2fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Checkfp7").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp8').prop('checked', false);
                    $('#Checkfp9').prop('checked', false);
                    $('#Descriptionfp3').val('NA');
                    $('#Descriptionfp3').prop("readonly", true);
                    $('#Actionfp3').val('NA');
                    $('#Actionfp3').prop("readonly", true);
                    $("#TdDivfp3").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr3fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr3fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp3').val('');
                    $('#Actionfp3').val('');
                    $("#SelectedNotifyUsr3fpFilter").val([]);
                    $("#SelectedNotifyUsr3fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp8").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp7').prop('checked', false);
                    $('#Checkfp9').prop('checked', false);
                    $('#Descriptionfp3').val('');
                    $('#Descriptionfp3').prop("readonly", false);
                    $('#Actionfp3').val('');
                    $('#Actionfp3').prop("readonly", false);
                    $("#TdDivfp3").removeAttr("style");
                    $("#SelectedNotifyUsr3fpFilter").val([]);
                    $("#SelectedNotifyUsr3fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp9").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp7').prop('checked', false);
                    $('#Checkfp8').prop('checked', false);
                    $('#Descriptionfp3').val('NA');
                    $('#Descriptionfp3').prop("readonly", true);
                    $('#Actionfp3').val('NA');
                    $('#Actionfp3').prop("readonly", true);
                    $("#TdDivfp3").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr3fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr3fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp3').val('');
                    $('#Actionfp3').val('');
                    $("#SelectedNotifyUsr3fpFilter").val([]);
                    $("#SelectedNotifyUsr3fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Checkfp10").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp11').prop('checked', false);
                    $('#Checkfp12').prop('checked', false);
                    $('#Descriptionfp4').val('NA');
                    $('#Descriptionfp4').prop("readonly", true);
                    $('#Actionfp4').val('NA');
                    $('#Actionfp4').prop("readonly", true);
                    $("#TdDivfp4").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr4fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr4fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp4').val('');
                    $('#Actionfp4').val('');
                    $("#SelectedNotifyUsr4fpFilter").val([]);
                    $("#SelectedNotifyUsr4Filter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp11").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp10').prop('checked', false);
                    $('#Checkfp12').prop('checked', false);
                    $('#Descriptionfp4').val('');
                    $('#Descriptionfp4').prop("readonly", false);
                    $('#Actionfp4').val('');
                    $('#Actionfp4').prop("readonly", false);
                    $("#SelectedNotifyUsr4fpFilter").val([]);
                    $("#SelectedNotifyUsr4fpFilter").selectpicker("refresh");
                    $("#TdDivfp4").removeAttr("style");
                }
                clearSign();
            });
            $("#Checkfp12").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp10').prop('checked', false);
                    $('#Checkfp11').prop('checked', false);
                    $('#Descriptionfp4').val('NA');
                    $('#Descriptionfp4').prop("readonly", true);
                    $('#Actionfp4').val('NA');
                    $('#Actionfp4').prop("readonly", true);
                    $("#TdDivfp4").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr4fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr4fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp4').val('');
                    $('#Actionfp4').val('');
                    $("#SelectedNotifyUsr4fpFilter").val([]);
                    $("#SelectedNotifyUsr4fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Checkfp13").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp14').prop('checked', false);
                    $('#Checkfp15').prop('checked', false);
                    $('#Descriptionfp5').val('NA');
                    $('#Descriptionfp5').prop("readonly", true);
                    $('#Actionfp5').val('NA');
                    $('#Actionfp5').prop("readonly", true);
                    $("#TdDivfp5").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr5fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr5fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp5').val('');
                    $('#Actionfp5').val('');
                    $("#SelectedNotifyUsr5fpFilter").val([]);
                    $("#SelectedNotifyUsr5fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp14").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp13').prop('checked', false);
                    $('#Checkfp15').prop('checked', false);
                    $('#Descriptionfp5').val('');
                    $('#Descriptionfp5').prop("readonly", false);
                    $('#Actionfp5').val('');
                    $('#Actionfp5').prop("readonly", false);
                    $("#TdDivfp5").removeAttr("style");
                    $("#SelectedNotifyUsr5fpFilter").val([]);
                    $("#SelectedNotifyUsr5fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp15").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp13').prop('checked', false);
                    $('#Checkfp14').prop('checked', false);
                    $('#Descriptionfp5').val('NA');
                    $('#Descriptionfp5').prop("readonly", true);
                    $('#Actionfp5').val('NA');
                    $('#Actionfp5').prop("readonly", true);
                    $("#TdDivfp5").attr("style", "pointer-events: none;");
                    $("#SelectedNotifyUsr5fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr5fpFilter").selectpicker("refresh");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp5').val('');
                    $('#Actionfp5').val('');
                    $("#SelectedNotifyUsr5fpFilter").val([]);
                    $("#SelectedNotifyUsr5fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Checkfp16").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp17').prop('checked', false);
                    $('#Checkfp18').prop('checked', false);
                    $('#Descriptionfp6').val('NA');
                    $('#Descriptionfp6').prop("readonly", true);
                    $('#Actionfp6').val('NA');
                    $('#Actionfp6').prop("readonly", true);
                    $("#SelectedNotifyUsr6fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr6fpFilter").selectpicker("refresh");
                    $("#TdDivfp6").attr("style", "pointer-events: none;");
                    $("#CheckListForm").valid();
                } else {
                    $('#Descriptionfp6').val('');
                    $('#Actionfp6').val('');
                    $("#SelectedNotifyUsr6fpFilter").val([]);
                    $("#SelectedNotifyUsr6fpFilter").selectpicker("refresh");
                }
                clearSign();
            });
            $("#Checkfp17").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp16').prop('checked', false);
                    $('#Checkfp18').prop('checked', false);
                    $('#Descriptionfp6').val('');
                    $('#Descriptionfp6').prop("readonly", false);
                    $('#Actionfp6').val('');
                    $('#Actionfp6').prop("readonly", false);
                    $("#SelectedNotifyUsr6fpFilter").val([]);
                    $("#SelectedNotifyUsr6fpFilter").selectpicker("refresh");
                    $("#TdDivfp6").removeAttr("style");
                }
                clearSign();
            });
            $("#Checkfp18").change(function () {
                if ($(this).is(':checked')) {
                    $('#Checkfp16').prop('checked', false);
                    $('#Checkfp17').prop('checked', false);
                    $('#Descriptionfp6').val('NA');
                    $('#Descriptionfp6').prop("readonly", true);
                    $('#Actionfp6').val('NA');
                    $('#Actionfp6').prop("readonly", true);
                    $("#SelectedNotifyUsr6fpFilter").val(["NA"]);
                    $("#SelectedNotifyUsr6fpFilter").selectpicker("refresh");
                } else {
                    $('#Descriptionfp6').val('');
                    $('#Actionfp6').val('');
                    $("#SelectedNotifyUsr6fpFilter").val([]);
                    $("#SelectedNotifyUsr6fpFilter").selectpicker("refresh");
                }
                clearSign();
            });

            $("#Editar").on("click", function () {
                $("#Guardar").show();
                //$('#tbl-dictium').show()
                $("#DictumComment").removeAttr("disabled");

                ////second form
                $("#Checkfp1").removeAttr("disabled");
                $("#Checkfp2").removeAttr("disabled");
                $("#Checkfp3").removeAttr("disabled");
                $("#Checkfp4").removeAttr("disabled");
                $("#Checkfp5").removeAttr("disabled");
                $("#Checkfp6").removeAttr("disabled");
                $("#Checkfp7").removeAttr("disabled");
                $("#Checkfp8").removeAttr("disabled");
                $("#Checkfp9").removeAttr("disabled");
                $("#Checkfp10").removeAttr("disabled");
                $("#Checkfp11").removeAttr("disabled");
                $("#Checkfp12").removeAttr("disabled");
                $("#Checkfp13").removeAttr("disabled");
                $("#Checkfp14").removeAttr("disabled");
                $("#Checkfp15").removeAttr("disabled");
                $("#Checkfp16").removeAttr("disabled");
                $("#Checkfp17").removeAttr("disabled");
                $("#Checkfp18").removeAttr("disabled");

                $("#Descriptionfp1").removeAttr("readOnly");
                $("#Descriptionfp2").removeAttr("readOnly");
                $("#Descriptionfp3").removeAttr("readOnly");
                $("#Descriptionfp4").removeAttr("readOnly");
                $("#Descriptionfp5").removeAttr("readOnly");
                $("#Descriptionfp6").removeAttr("readOnly");

                $('#TdDivfp1').removeAttr('hidden');
                $('#TdDivfp2').removeAttr('hidden');
                $('#TdDivfp3').removeAttr('hidden');
                $('#TdDivfp4').removeAttr('hidden');
                $('#TdDivfp5').removeAttr('hidden');
                $('#TdDivfp6').removeAttr('hidden');

                $("#Actionfp1").removeAttr("readOnly");
                $("#Actionfp2").removeAttr("readOnly");
                $("#Actionfp3").removeAttr("readOnly");
                $("#Actionfp4").removeAttr("readOnly");
                $("#Actionfp5").removeAttr("readOnly");
                $("#Actionfp6").removeAttr("readOnly");


                //$("#CommentIv").removeAttr("readOnly");
                $("#CommentFP").removeAttr("readOnly");
                //AHF
                disabledControlsQuestionary();
                $("#CheckDictium1").prop("disabled", false);
                $("#CheckDictium2").prop("disabled", false);
                const spans = $("[id^=spanNotifyf]");
                $.each(spans, (index, item) => {
                    item.hidden = true;
                    const id = item.id.replace("spanNotifyf", "");
                    const valueItem = item.textContent;
                    const arrayValue = !!valueItem ? valueItem.split(",") : [];
                    if (!!arrayValue && !!arrayValue.length) {
                        $(`#SelectedNotifyUsr${id}fpFilter`).val(arrayValue);
                        $(`#SelectedNotifyUsr${id}fpFilter`).selectpicker("refresh");
                    }
                });
            });
        });

        var table = $("#tblHistorial").DataTable({
            pageLength: 20,
            orderCellsTop: true,
            fixedHeader: true,
            bLengthChange: false,
            bFilter: true,
            bAutoWidth: false,
            searching: true,
            sDom: 'lrtip',
            "paging": false,
            "bInfo": false,
            buttons: [
                {
                    extend: 'csv',
                    charset: 'utf-8',
                    bom: true
                }
            ],
            "language": {
                "search": '<a href="@Url.Action("Index", "home" )" class="btn btn-white m-r-5"><i class="fa fa-eraser"></i> @btnFilter</a> <br><div><i class="fa fa-filter" aria-hidden="true"></i>Buscar',
                "searchPlaceholder": '@searchPlaceholder',
                "emptyTable": "@emptyTable",
                "lengthMenu": "@lengthMenu",
                "info": "@info",
                "paginate": {
                    "first": "@paginatefirst",
                    "last": "@paginatelast",
                    "next": "@pageNext",
                    "previous": "@pagePreviuos"
                },
                "loadingRecords": "@loadingRecords",
                "processing": "@processing",
                "zeroRecords": "@zeroRecords",
                "infoEmpty": "@infoEmpty",
                "infoFiltered": "@infoFiltered",
            },
            "order": [],
            "columnDefs": [{
                "targets": 'no-sort',
                "orderable": false,
            }]

        });
         var tableState = $("#tblStates").DataTable({
            pageLength: 20,
            orderCellsTop: true,
            fixedHeader: true,
            bLengthChange: false,
            bFilter: true,
            bAutoWidth: false,
            searching: true,
            sDom: 'lrtip',
            "paging": false,
            "bInfo": false,
                buttons: [
                    {
                        extend: 'csv',
                        charset: 'utf-8',
                        bom: true,
                        title: "Control del proceso de fabricación 'Total'",

                    }
                ],
                "language": {
                    "search": '<a href="@Url.Action("Index", "home" )" class="btn btn-white m-r-5"><i class="fa fa-eraser"></i> @btnFilter</a> <br><div><i class="fa fa-filter" aria-hidden="true"></i>Buscar',
                    "searchPlaceholder": '@searchPlaceholder',
                    "emptyTable": "@emptyTable",
                    "lengthMenu": "@lengthMenu",
                    "info": "@info",
                    "paginate": {
                        "first": "@paginatefirst",
                        "last": "@paginatelast",
                        "next": "@pageNext",
                        "previous": "@pagePreviuos"
                    },
                    "loadingRecords": "@loadingRecords",
                    "processing": "@processing",
                    "zeroRecords": "@zeroRecords",
                    "infoEmpty": "@infoEmpty",
                    "infoFiltered": "@infoFiltered",
                },
                "order": [],
                "columnDefs": [{
                    "targets": 'no-sort',
                    "orderable": false
                }]

        });
        function CancelApp() {
            $.ajax({
                type: "POST",
                url: "/CheckListQuestions/CancelApprove?option=2",
                data: serializeCheckList(2),
                dataType: "json",
                success: function (response) {
                    if (response.result === "Ok") {
                        $.gritter.add({
                            title: "",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                        $('#BtnCancel').hide();
                        $('#BtnCancelApprove').hide();
                    }
                    else {
                        $.gritter.add({
                            title: "Ocurrió un error",
                            text: response.message,
                            class_name: "gritter-light"
                        })
                    }
                }
            });
        }
        function signPipeFillingCustomerRecord() {
            var reviewedDate = new Date();
            $('#BtnPipeFillingCustomerReviewedSignature').attr("hidden",true)
            $('#PipeFillingCustomerReviewedSignature').html(getSignature("@userFirstName", reviewedDate))
        }
        function getSignature(name, date) {
            if (date === null || date === undefined) {
                return "<span>" + name + "</span>"
            }
            else {
                let mm = (date.getMonth() + 1) < 10 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1)
                let dd = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();
                let yy = date.getFullYear()
                let HH = date.getHours()
                let m = date.getMinutes()
                return "<span>" + name + "</span>" + "<br>" + yy + '-' + mm + '-' + dd + " " + HH + ":" + ("0" + m).slice(-2)
            }
        }
        //AHF
        function configValidations() {
            $.validator.addMethod("requirementOne", function (value, element) {
                return $(".requirement-one:checked").length > 0
            }, "Debe seleccionar una opción.");
            $.validator.addMethod("requirementTwo", function (value, element) {
                return $(".requirement-two:checked").length > 0
            }, "Debe seleccionar una opción.");
            $.validator.addMethod("requirementThree", function (value, element) {
                return $(".requirement-three:checked").length > 0
            }, "Debe seleccionar una opción.");
            $.validator.addMethod("requirementFour", function (value, element) {
                return $(".requirement-four:checked").length > 0
            }, "Debe seleccionar una opción.");
            $.validator.addMethod("requirementFive", function (value, element) {
                return $(".requirement-five:checked").length > 0
            }, "Debe seleccionar una opción.");
            $.validator.addMethod("requirementSix", function (value, element) {
                return $(".requirement-six:checked").length > 0
            }, "Debe seleccionar una opción.");
            $("#CheckListForm").validate({
                groups: {
                    Checkfp1: "Checkfp1 Checkfp2 Checkfp3",
                    Checkfp4: "Checkfp4 Checkfp5 Checkfp6",
                    Checkfp7: "Checkfp7 Checkfp8 Checkfp9",
                    Checkfp10: "Checkfp10 Checkfp11 Checkfp12",
                    Checkfp13: "Checkfp13 Checkfp14 Checkfp15",
                    Checkfp16: "Checkfp16 Checkfp17 Checkfp18"
                },
                rules: {
                    "Descriptionfp1": {
                        required: function (element) {
                            return $(".requirement-one:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr1fpFilter": {
                        required: function (element) {
                            return $(".requirement-one:checked").length > 0;
                        }
                    },
                    "Actionfp1": {
                        required: function (element) {
                            return $(".requirement-one:checked").length > 0;
                        }
                    },
                    "Descriptionfp2": {
                        required: function (element) {
                            return $(".requirement-two:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr2fpFilter": {
                        required: function (element) {
                            return $(".requirement-two:checked").length > 0;
                        }
                    },
                    "Actionfp2": {
                        required: function (element) {
                            return $(".requirement-two:checked").length > 0;
                        }
                    },
                    "Descriptionfp3": {
                        required: function (element) {
                            return $(".requirement-three:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr3fpFilter": {
                        required: function (element) {
                            return $(".requirement-three:checked").length > 0;
                        }
                    },
                    "Actionfp3": {
                        required: function (element) {
                            return $(".requirement-three:checked").length > 0;
                        }
                    },
                    "Descriptionfp4": {
                        required: function (element) {
                            return $(".requirement-four:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr4fpFilter": {
                        required: function (element) {
                            return $(".requirement-four:checked").length > 0;
                        }
                    },
                    "Actionfp4": {
                        required: function (element) {
                            return $(".requirement-four:checked").length > 0;
                        }
                    },
                    "Descriptionfp5": {
                        required: function (element) {
                            return $(".requirement-five:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr5fpFilter": {
                        required: function (element) {
                            return $(".requirement-five:checked").length > 0;
                        }
                    },
                    "Actionfp5": {
                        required: function (element) {
                            return $(".requirement-five:checked").length > 0;
                        }
                    },
                    "Descriptionfp6": {
                        required: function (element) {
                            return $(".requirement-six:checked").length > 0;
                        }
                    },
                    "SelectedNotifyUsr6fpFilter": {
                        required: function (element) {
                            return $(".requirement-six:checked").length > 0;
                        }
                    },
                    "Actionfp6": {
                        required: function (element) {
                            return $(".requirement-six:checked").length > 0;
                        }
                    }
                },
                messages: {
                    "Descriptionfp1": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr1fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp1": {
                        required: "Es requerido."
                    },
                    "Descriptionfp2": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr2fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp2": {
                        required: "Es requerido."
                    },
                    "Descriptionfp3": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr3fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp3": {
                        required: "Es requerido."
                    },
                    "Descriptionfp4": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr4fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp4": {
                        required: "Es requerido."
                    },
                    "Descriptionfp5": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr5fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp5": {
                        required: "Es requerido."
                    },
                    "Descriptionfp6": {
                        required: "Es requerido."
                    },
                    "SelectedNotifyUsr6fpFilter": {
                        required: "Es requerido."
                    },
                    "Actionfp6": {
                        required: "Es requerido."
                    }
                },
                highlight: function (element, errorClass) {
                    // Override the default behavior here
                }
            });
        }
        function removeValidationsChecks() {
            $("form").validate();
            $("#Checkfp1").rules("remove");
            $("form").validate();
            $("#Checkfp2").rules("remove");
            $("form").validate();
            $("#Checkfp3").rules("remove");
            $("form").validate();
            $("#Checkfp4").rules("remove");
            $("form").validate();
            $("#Checkfp5").rules("remove");
            $("form").validate();
            $("#Checkfp6").rules("remove");
            $("form").validate();
            $("#Checkfp7").rules("remove");
            $("form").validate();
            $("#Checkfp8").rules("remove");
            $("form").validate();
            $("#Checkfp9").rules("remove");
            $("form").validate();
            $("#Checkfp10").rules("remove");
            $("form").validate();
            $("#Checkfp11").rules("remove");
            $("form").validate();
            $("#Checkfp12").rules("remove");
            $("form").validate();
            $("#Checkfp13").rules("remove");
            $("form").validate();
            $("#Checkfp14").rules("remove");
            $("form").validate();
            $("#Checkfp15").rules("remove");
            $("form").validate();
            $("#Checkfp16").rules("remove");
            $("form").validate();
            $("#Checkfp17").rules("remove");
            $("form").validate();
            $("#Checkfp18").rules("remove");
        }
        function addValidationsChecks() {
            $("form").validate();
            $("#Checkfp1").rules("add", "requirementOne");
            $("form").validate();
            $("#Checkfp2").rules("add", "requirementOne");
            $("form").validate();
            $("#Checkfp3").rules("add", "requirementOne");
            $("form").validate();
            $("#Checkfp4").rules("add", "requirementTwo");
            $("form").validate();
            $("#Checkfp5").rules("add", "requirementTwo");
            $("form").validate();
            $("#Checkfp6").rules("add", "requirementTwo");
            $("form").validate();
            $("#Checkfp7").rules("add", "requirementThree");
            $("form").validate();
            $("#Checkfp8").rules("add", "requirementThree");
            $("form").validate();
            $("#Checkfp9").rules("add", "requirementThree");
            $("form").validate();
            $("#Checkfp10").rules("add", "requirementFour");
            $("form").validate();
            $("#Checkfp11").rules("add", "requirementFour");
            $("form").validate();
            $("#Checkfp12").rules("add", "requirementFour");
            $("form").validate();
            $("#Checkfp13").rules("add", "requirementFive");
            $("form").validate();
            $("#Checkfp14").rules("add", "requirementFive");
            $("form").validate();
            $("#Checkfp15").rules("add", "requirementFive");
            $("form").validate();
            $("#Checkfp16").rules("add", "requirementSix");
            $("form").validate();
            $("#Checkfp17").rules("add", "requirementSix");
            $("form").validate();
            $("#Checkfp18").rules("add", "requirementSix");
        }
        function addValidationsComments() {
            $("form").validate();
            $("#DictumComment").rules("add", {
                required: true,
                messages: {
                    required: "Es requerido."
                }
            });
        }
        function removeValidationComments() {
            $("form").validate();
            $("#DictumComment").rules("remove");
        }
        function isAllCheckedNA() {
            return $(".check-na:checked").length >= 6;
        }
        function existCheckedNoCumple() {
            return $(".check-nocumple:checked").length >= 1;
        }
        function validationSign() {
            if (!!$("#CheckDictium1").is(":checked") || !!$("#CheckDictium2").is(":checked")) {
                return !!$("#PipeFillingCustomerReviewedSignature").html() && !!$("#BtnPipeFillingCustomerReviewedSignature").prop("hidden");
            }
            return true;
        }
        function clearSign() {
            if (!!$("#CheckDictium1").is(":checked") || !!$("#CheckDictium2").is(":checked")) {
                $("#BtnPipeFillingCustomerReviewedSignature").prop("hidden", true);
                $("#PipeFillingCustomerReviewedSignature").html('');
                $("#CheckDictium1").prop("checked", false);
                $("#CheckDictium2").prop("checked", false);
            }
        }
        function disabledControlsQuestionary() {
            if ($("#Checkfp1").is(":checked") || $("#Checkfp3").is(":checked")) {
                $('#Descriptionfp1').prop("readonly", true);
                $('#Actionfp1').prop("readonly", true);
                $("#TdDivfp1").attr("style", "pointer-events: none;");
            }
            if ($("#Checkfp4").is(":checked") || $("#Checkfp6").is(":checked")) {
                $('#Descriptionfp2').prop("readonly", true);
                $('#Actionfp2').prop("readonly", true);
                $("#TdDivfp2").attr("style", "pointer-events: none;");
            }
            if ($("#Checkfp7").is(":checked") || $("#Checkfp9").is(":checked")) {
                $('#Descriptionfp3').prop("readonly", true);
                $('#Actionfp3').prop("readonly", true);
                $("#TdDivfp3").attr("style", "pointer-events: none;");
            }
            if ($("#Checkfp10").is(":checked") || $("#Checkfp12").is(":checked")) {
                $('#Descriptionfp4').prop("readonly", true);
                $('#Actionfp4').prop("readonly", true);
                $("#TdDivfp4").attr("style", "pointer-events: none;");
            }
            if ($("#Checkfp13").is(":checked") || $("#Checkfp15").is(":checked")) {
                $('#Descriptionfp5').prop("readonly", true);
                $('#Actionfp5').prop("readonly", true);
                $("#TdDivfp5").attr("style", "pointer-events: none;");
            }
            if ($("#Checkfp16").is(":checked") || $("#Checkfp18").is(":checked")) {
                $('#Descriptionfp6').prop("readonly", true);
                $('#Actionfp6').prop("readonly", true);
                $("#TdDivfp6").attr("style", "pointer-events: none;");
            }
        }
        function serializeCheckList(option) {
            var ReasonReject = null;
            if (option == 1) {
                ReasonReject = $("#ReasonReject").val()
            }
            else {
                ReasonReject = $("#ReasonRejectAnswer").val()
            }
             return {
                 "Id": @Model.Id,
                 "checkListId": @checkListId,
                 "Pipe": $("#Pipe").val(),
                 "NumberOrder": @idOA,
                 "TourNumber": $("#TourNumber").val(),
                 "DistributionBatch": $("#DistributionBatch").val(),
                 "ReasonReject": ReasonReject,
                 "LastDateRecord": '@Model.LastDateRecord'
            }
        }
    </script>

}

<style>
    .error {
        position: unset !important;
        margin-left: unset !important;
        width: auto !important;
        color: red;
        background-color: pink;
    }
</style>